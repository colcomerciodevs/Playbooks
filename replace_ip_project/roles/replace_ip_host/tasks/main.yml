---
# (1) Construir regex final (automático o manual)
- name: Build regex
  ansible.builtin.include_tasks: build_regex.yml

# (2) Encontrar scripts según patrones en scan_root
- name: Find files
  ansible.builtin.include_tasks: find_files.yml

# (3) Procesar archivos (before/replace/after por archivo)
- name: Process files
  ansible.builtin.include_tasks: process_files.yml

# (4) Construir summary por host
- name: Build summary
  ansible.builtin.include_tasks: summary.yml

# (5) Generar reporte consolidado (delegado a localhost)
- name: Generate report
  ansible.builtin.include_tasks: report.yml
  run_once: true
